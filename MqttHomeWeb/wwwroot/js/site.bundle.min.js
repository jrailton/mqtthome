function SubscribeToPush(){navigator.serviceWorker&&navigator.serviceWorker.ready.then(function(n){RegisterPushSubscription(n)})}function Notify(n,t){var r,i;window.notifyContainer||(r=$('<div style="position: fixed; top: 51px; left: 50%; transform: translate(-50%); z-index: 99999;"><\/div>'),$("body").append(r),window.notifyContainer=r);i=$(n);window.notifyContainer.append(i);setTimeout(function(){i.hide(200,function(){i.remove()})},t?t:2e3)}function RegisterPushSubscription(n){return new Promise(function(t,i){n.pushManager.getSubscription().then(function(r){r?(debug&&console.log("Already subscribed to push notifications"),window.subscription=MESSAGING.subscription=r,t(r)):n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:MESSAGING.urlB64ToUint8Array(publicKey)}).then(function(n){n&&(MESSAGING.subscribed=!0,debug&&console.log("Newly subscribed to push notifications"),window.subscription=MESSAGING.subscription=n,DATA.GetSetting("push-notified",!1).then(function(){MESSAGING.PushNotify(n)}),t(n));i()}).catch(function(){MESSAGING.get("/userapi/pushdenied")})})})}function SwitchOff(n){confirm("Are you sure you want to turn "+n+" off?")&&$.get("/switch/off/"+n,function(n){Notify(n)})}function SwitchOn(n){confirm("Are you sure you want to turn "+n+" on?")&&$.get("/switch/on/"+n,function(n){Notify(n)})}(function(n,t){var i=t(n);typeof define=="function"&&define.amd?define(function(){return i}):typeof module=="object"&&module.exports?module.exports=i:n.Gauge=i})(typeof window=="undefined"?this:window,function(n){function h(n){function r(){var n=t/e,u=s*c(n)+i;h(u,t);t+=1;n<1&&f(r)}var u=n.duration,t=1,e=60*u,i=n.start||0,o=n.end,s=o-i,h=n.step,c=n.easing||function(n){return(n/=.5)<1?.5*Math.pow(n,3):.5*(Math.pow(n-2,3)+2)};f(r)}var u=n.document,s=Array.prototype.slice,f=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(n){return setTimeout(n,1e3/60)};const t=Math.cos,i=Math.sin,r=Math.PI,e=([[n,t],[i,r]],[u,f])=>[n*u+t*f,i*u+r*f],c=n=>[[t(n),-i(n)],[i(n),t(n)]],o=([n,t],[i,r])=>[n+i,t+r],l=([n,f],[s,h],[l,a],v)=>{a=a%(2*r);const y=c(v),[w,b]=o(e(y,[s*t(l),h*i(l)]),[n,f]),[k,d]=o(e(y,[s*t(l+a),h*i(l+a)]),[n,f]),g=a>r?1:0,nt=a>0?1:0,p=u.createElementNS("http://www.w3.org/2000/svg","path");return p.setAttribute("d","M "+w+" "+b+" A "+[s,h,v/(2*r)*360,g,nt,k,d].join(" ")),p};return function(){function c(){var n=arguments[0],t=s.call(arguments,1);return t.forEach(function(t){for(k in t)t.hasOwnProperty(k)&&(n[k]=t[k])}),n}function n(n,t,i){var r=u.createElementNS(e,n);for(var f in t)r.setAttribute(f,t[f]);return i&&i.forEach(function(n){r.appendChild(n)}),r}function r(n,t){return n/100*t}function t(n,t,i){var r=Number(n);return r>i?i:r<t?t:r}function l(n,t,i){var r=i-t,u=n-t;return 100*u/r}function f(n,t,i,r){var u=r*Math.PI/180;return{x:Math.round((n+i*Math.cos(u))*1e3)/1e3,y:Math.round((t+i*Math.sin(u))*1e3)/1e3}}function a(n,t,r){var u=i.centerX,e=i.centerY;return{end:f(u,e,n,r),start:f(u,e,n,t)}}var e="http://www.w3.org/2000/svg",i={centerX:50,centerY:50},o={dialRadius:40,dialStartAngle:135,dialEndAngle:45,value:0,max:100,min:0,valueDialClass:"value",valueClass:"value-text",dialClass:"dial",gaugeClass:"gauge",showValue:!0,gaugeColor:null,label:function(n){return Math.round(n)},name:""};return function(i,u){function nt(n,t,i,r){var u=a(n,t,i),f=u.start,e=u.end,o=typeof r=="undefined"?1:r;return["M",f.x,f.y,"A",n,n,0,o,1,e.x,e.y].join(" ")}function at(t){k=n("text",{x:50,y:50,fill:"#999","class":ot,"font-size":"100%","font-family":"sans-serif","font-weight":"normal","text-anchor":"middle","alignment-baseline":"middle","dominant-baseline":"central"});d=n("text",{x:50,y:63,fill:"#999","class":"name","font-size":"100%","font-family":"sans-serif","font-weight":"normal","text-anchor":"middle","alignment-baseline":"middle","dominant-baseline":"central"});p=n("path",{"class":et,fill:"none",stroke:"#666","stroke-width":2.5,d:nt(w,e,e)});var i=r(100,360-Math.abs(e-s)),u=i<=180?0:1,f=n("svg",{viewBox:lt||"0 0 100 100","class":ht},[n("path",{"class":st,fill:"none",stroke:"#eee","stroke-width":2,d:nt(w,e,s,u)}),k,p,d]);t.appendChild(f)}function it(n){var i=l(n,y,v),t=r(i,360-Math.abs(e-s)),f=t<=180?0:1;ft&&(k.textContent=ct.call(u,n));d.textContent=u.name;p.setAttribute("d",nt(w,e,t+e,f))}function rt(n,t){var r=b(n),u=t*1e3,i="stroke "+u+"ms ease";p.style=["stroke: "+r,"-webkit-transition: "+i,"-moz-transition: "+i,"transition: "+i,].join(";")}var tt;u=c({},o,u);var ut=i,v=u.max,y=u.min,f=t(u.value,y,v),w=u.dialRadius,ft=u.showValue,e=u.dialStartAngle,s=u.dialEndAngle,et=u.valueDialClass,ot=u.valueClass,vt=u.valueLabelClass,st=u.dialClass,ht=u.gaugeClass,b=u.color,k,p,d,ct=u.label,lt=u.viewBox,g;return e<s&&(console.log("WARN! startAngle < endAngle, Swapping"),tt=e,e=s,s=tt),g={setMaxValue:function(n){v=n},setValue:function(n){f=t(n,y,v);b&&rt(f,0);it(f)},setValueAnimated:function(n,i){var r=f;(f=t(n,y,v),r!==f)&&(b&&rt(f,i),h({start:r||0,end:f,duration:i||1,step:function(n,t){it(n,t)}}))},getValue:function(){return f}},at(ut),g.setValue(f),g}}()});